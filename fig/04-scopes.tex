\documentclass{lecturefig}
\usepackage{fig/04-common}
\begin{document}
\begin{frame}<1-3>
  \begin{tikzpicture}[start chain=going below,node distance=0cm]
    \begin{SCOPE}[onslide=<1>{text={void foo()\space}},onslide=<3>{fill=badbee!50}]{A}
      \LINE[] (def) {\alt<1>{int A;}{\only<3>{\colorbox{badbee!50}}{\LET}\alt<3>{\colorbox{letcolor}}{\space}{A}}};
      \LINE[] (decl)   {\alt<1>{extern int B;}{\DECL B}};
      \LINE[onslide=<3>{fill=refcolor}] (use) {A};
    \end{SCOPE}

    \begin{onlyenv}<3>

    \draw[->] (use.west) -- (use.west -| A-start-line.west) |- node[pos=0.25,left,anchor=east,align=left]{Namens-\\auflÃ¶sung} (def);

    \draw[->] (A-start.west) ++(east:3cm) coordinate(@)
               -- ++(east:1cm) node[right,anchor=west]{Namensraum};
    \draw[->] (def.east-|@)  -- ++(east:1cm) node[right,anchor=west]{Definition};
    \draw[->] (decl.east-|@)  -- ++(east:1cm) node[right,anchor=west]{Deklaration};
    \draw[->] (use.east-|@)    -- ++(east:1cm) node[right,anchor=west]{Referenz};
    \end{onlyenv}
  \end{tikzpicture}
\end{frame}

\end{document}
